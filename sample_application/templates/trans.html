{% extends "material/base.html" %}
{% import "card_with_image.html" as cwi %}

{% include 'header.html' %}

{% block body %}

{% block scripts %}
<!--Import jQuery before materialize.js-->
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
{%- endblock scripts %}

       {% if current_user.is_authenticated %}
        {{ col(['s4', 'm4','l2']) }}
         <div id="fixed" class="fixed hide-on-med-and-down">
      <form id="myForm" method="post" class="white-text">


          <div class="center">
        <a id="addVar" class="waves-effect waves-light btn">Mark The Word</a>
        <a class="alignRight waves-effect waves-light btn" type="submit" value="提交">Submit</a>
              </div>
      </form>
             </div>
 {% endif %}
{% include 'nav.html' %}

<script type="text/javascript">
  $(document).ready(function(){
	$('img').materialbox();
	$("input.vmail.vinput").attr("placeholder", "邮箱（可选）");
	$("input.vlink.vinput").attr("placeholder", "网址[http://](可选）");
	$("img").addClass("materialboxed");
	$("img").addClass("responsive-img");
	$("blockquote").addClass("blue-text");
		 $('.modal').modal(
	 {
      startingTop: '50%', // Starting top style attribute
      endingTop: '10%', // Ending top style attribute
    }
	 );
  });
$













</script>

<script>
        //初始参数个数
        var varCount = 0;
        $(function () {
          //新增按钮点击
            $('#addVar').on('click', function(){
                varCount++;
                /*
                $node = '<p><label for="var'+varCount+'">项目 '+varCount+': </label>'
                  + '<input type="text" name="var'+varCount+'" id="var'+varCount+'">'
                  + '<span class="removeVar">删除</span></p>'; */

                  $node =  `
                  <p>
          <label for="var ${varCount}">Words ${varCount}: </label>
          <input type="text" name="var${varCount}" id="var${varCount}">
            <label for="textarea1">解释</label>
            <input type="text" name="var${varCount}" id="var${varCount}">
            <label for="textarea${varCount}">例句</label>
            <textarea id="textarea${varCount}" class="materialize-textarea"></textarea>

          <a class="removeVar waves-effect waves-light btn">删除</a>
        </p>
        `











            //新表单项添加到“新增”按钮前面
                $(this).parent().before($node);
            });

          //删除按钮点击
          $('form').on('click', '.removeVar', function(){
            $(this).parent().remove();
            varCount--;
          });
        });
    </script>

<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WKWF77X"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->

<style type="text/css">
    .fixed {
  position: fixed;
  bottom: 0;
  right: 0;
  width: 250px;
}

 form{
            padding:5px;
            font-size: 16px;
        }
</style>

{% block content %}
<div class="section">
    {{ container() }}
    {{ row() }}
    {{ col(['s12', 'm12','l12']) }}
    <div class="post-preview" style="">
        <div class="card ">
            <div class="card-image">
                {% if post.image %}
                <img src="{{ post.image }}">
                {% else %}
                <img src="{{ url_for('static', filename= 'images/coffee.jpg') }}">
                {% endif %}
                <span class="card-title flow-text orange darken-1-text"><h5>{{ post.title }}</h5></span>

            </div>
            <div class="card-content">

                {% if post.tags %}
                <ul class="list-unstyled list-inline">
                    {% for t in post.tags %}


                    <div class="chip">
                        <a href="/tag/{{ t.id }}"><i class="material-icons left">bookmark</i>{{ t.name | get_clean_tag
                            }}</a>
                    </div>

                    {% endfor %}
                </ul>
                {% endif %}
                {% if post.user %}
                <p class="post-meta">Posted by <a href="{{ url_for('blog.index') }}">{{ post.user }}</a> on {{
                    post.pub_date| my_format_datetime}}
                    {% else %}
                <p class="post-meta">Posted by <a href="{{ url_for('blog.index') }}">Admin</a> on {{ post.pub_date |
                    my_format_datetime}}
                    {% endif %}
                 <a class="waves-effect waves-teal btn-flat" onclick="$('blockquote').toggle()">阅读模式</a>
            </div>
        </div>

        <hr>

        {{ col(['s12', 'm12','l12']) }}
        <div>
            <div class="card-content white-text lighten-5">
                {% autoescape false %}
                {% if post.text %}
                {{ post.text }}
                {% else %}
                {{ post.html }}
                {% endif %}
                {% endautoescape %}
            </div>
        </div>
        <hr>








    </div>
        <div class="section z-depth-4 hoverable">
            <h5 class="white-text"> Comments:</h5>
            <div class="comment  white"></div>
            <script>
        new Valine({
            // AV 对象来自上面引入av-min.js(老司机们不要开车➳♡゛扎心了老铁)
            av: AV,
            el: '.comment', //
            notify:false,
            verify:false,
            app_id: '6oLEzb6tVlViPP2NCPa3eTjw-gzGzoHsz', // 这里填写上面得到的APP ID
            app_key: 'tlGbmo4f53nLPl1sfbvgBbFG', // 这里填写上面得到的APP KEY
            placeholder: '评论支持Markdown语法，点击preview可预览', // [v1.0.7 new]留言框占位提示文字
            avatar:''
        });

            </script>
        </div>
        {{ enddiv() }}
        {{ enddiv() }}
          <!-- Modal Trigger -->

  <!-- Modal Structure -->
  <div id="modal1" class="modal">
    <div class="modal-content">
      <h4>Modal Header</h4>
      <p>A bunch of text</p>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
    </div>
  </div>


        {{ enddiv() }}

        {{ enddiv() }}
        {{ enddiv() }}
<div id="modal1" class="modal1">
    <div class="modal-content">
      <h4>Modal Header</h4>
      <p>A bunch of text</p>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
    </div>
  </div>

        {% endblock content %}
     {% if current_user.is_authenticated %}
         {% include 'fix_button.html' %}
        {% endif %}
        {% include 'footer.html' %}
        {% endblock body %}